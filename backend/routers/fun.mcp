// MCP file for Fun functionality
from fastapi import APIRouter
import httpx

router = APIRouter()

@router.get("/joke")
async def get_joke():
    url = "https://official-joke-api.appspot.com/random_joke"
    async with httpx.AsyncClient() as client:
        try:
            r = await client.get(url)
            r.raise_for_status()
            joke = r.json()
            print("Fetched joke:", joke)  # Debugging log
            return joke
        except (httpx.RequestError, httpx.HTTPStatusError) as e:
            print("Error fetching joke:", e)  # Debugging log
            return {"error": "Failed to fetch a joke", "details": str(e)}
